{"version":3,"sources":["img/sad.png","img/thumbup.png","App.js","utils/utils.js","utils/thymeleaf-utils.js","panels/RedirectButtonType.js","panels/ButtonTemplate.js","utils/PlatformType.js","panels/RedirectButton.js","panels/utils.js","panels/Message.js","panels/ErrorMessage.js","panels/UnregisteredUserMessage.js","panels/MenuButton.js","panels/PermanentAccessInstruction.js","panels/ContentPanel.js","utils/render.js","panels/TemporaryAccessProvided.js","panels/NeedCacheCleanMessage.js","utils/ApiError.js","utils/request.js","panels/TemporaryAccessDeclined.js","utils/accessRequest.js","utils/VkDataAccessType.js","utils/ApiErrorHandler.js","panels/PermanentAccessProvided.js","utils/PermanentAccessProvideResult.js","panels/PermanentAccessDeclined.js","utils/start.js","utils/handleEvent.js","index.js","img/kind.png","panels/style.module.css"],"names":["module","exports","App","panel","activePanel","props","id","exists","obj","undefined","strIsBlank","str","strContains","substr","indexOf","ThymeleafParamName","getThymeleafParam","paramName","getThymeleafParamWithDefault","defaultValue","el","getThymeleafParamContainer","text","setThymeleafParam","value","$","getThymeleafParamBool","getThymeleafParamInt","strRes","parseInt","RedirectButtonType","ButtonTemplate","onClick","size","level","className","styles","button","PlatformType","RedirectButton","urlThParamName","buttonTextThParamName","type","DIALOG","GROUP","PERMANENT_ACCESS","href","permanentAccessProvideResult","attributes","target","MOBILE","createButton","buttonLink","handleLineBreakers","lines","split","getLines","length","map","line","createRegisteredDependentRedirectButton","redirectButtonType","htmlTagName","classNames","CustomTag","wrapper","flex","Message","marginTopPc","marginTopMobile","textHeader","emoticon","content","buttons","marginTop","PC","style","container","src","alt","ErrorMessage","sadImg","UnregisteredUserMessage","kindImg","MenuButton","createTextContainer","bigTextContainer","PermanentAccessInstruction","mobileText","textAlign","fontWeight","ContentPanel","headerText","showPanelHeader","render","Tag","tag","panelHeaderText","contentPanel","ReactDOM","document","getElementById","renderPermanentAccessInstruction","TemporaryAccessProvided","buttonText","thumbupImg","NeedCacheCleanMessage","ApiError","requestWithRepeatedFlag","methodUrn","parameters","dataHandler","repeated","apiErrorHandlers","apiUrl","params","defaultParams","token","Object","assign","createParamsContainer","axious","post","then","response","data","getResponseData","catch","e","TOKEN_NOT_RELEVANT","TOKEN_EXPIRED","renderErrorMessage","handleExpiredToken","apiErrorHandler","errorCode","hadler","getApiErrorHandler","res","request","TemporaryAccessDeclined","requestAccess","appId","scope","connect","send","renderTemporaryAccessDeclined","VkDataAccessType","ApiErrorHandler","this","PermanentAccessProvided","PermanentAccessProvideResult","PermanentAccessDeclined","start","platformType","os","platform","toString","toLowerCase","checkPlatformType","SUCCESS","DECLINED","handlePermanentAccessProvideResult","userNotRegisteredHandler","USER_NOT_REGISTERED","NONE","TEMPORARY","PERMANENT","handleAccessType","handleEvent","event","detail","access_token","handleAccessProvided","subscribe"],"mappings":"qGAAAA,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,qC,2YCY5BC,G,OARH,SAAC,GAAe,IAAbC,EAAY,EAAZA,MACd,OACC,kBAAC,IAAD,CAAMC,YAAaD,EAAME,MAAMC,IAC7BH,K,kCCLG,SAASI,EAAOC,GACtB,YAAeC,IAARD,GAA6B,OAARA,EAGtB,SAASE,EAAWC,GAC1B,OAAQJ,EAAOI,IAAgB,KAARA,EAcjB,SAASC,EAAYD,EAAKE,GAChC,QAAIH,EAAWC,KAASJ,EAAOM,MAGC,IAAzBF,EAAIG,QAAQD,GCtBb,IAAME,EACL,QADKA,EAEqB,kCAFrBA,EAGL,QAHKA,EAIG,gBAJHA,EAKG,gBALHA,EAME,eANFA,EAOA,aAPAA,EAQA,aARAA,EASD,YATCA,EAUO,oBAVPA,EAWiB,8BAXjBA,EAYgB,6BAZhBA,EAagB,6BAbhBA,EAcuB,oCAdvBA,EAekB,+BAflBA,EAgBa,0BAhBbA,EAiBc,2BAjBdA,EAkBkB,+BAlBlBA,EAmBkB,+BAnBlBA,EAoBH,UApBGA,EAqBgB,6BArBhBA,EAsBc,2BAtBdA,EAuBiB,8BAvBjBA,EAwBsB,mCAxBtBA,EAyBoB,iCAzBpBA,EA0BsB,mCA1BtBA,EA2BoB,iCA3BpBA,EA4BU,uBA5BVA,EA6BJ,SA7BIA,EA8BgB,6BA9BhBA,EA+Bc,2BA/BdA,EAgC0B,uCAhC1BA,EAiCU,uBAjCVA,EAkCqB,kCAG3B,SAASC,EAAkBC,GACjC,OAAOC,EAA6BD,EAAW,MAGzC,SAASC,EAA6BD,EAAWE,GACvD,IAAMC,EAAKC,EAA2BJ,GACtC,OAAKG,GAAMV,EAAWU,EAAGE,QACjBH,EAEDC,EAAGE,OAGJ,SAASC,EAAkBN,EAAWO,GAC5C,IAAMJ,EAAKC,EAA2BJ,GACjCV,EAAOa,IAGZA,EAAGE,KAAKE,GAGT,SAASH,EAA2BJ,GACnC,OAAOQ,IAAE,OAASR,GAGZ,SAASS,EAAsBT,GAErC,MAAe,SADAC,EAA6BD,EAAW,SAOjD,SAASU,GAAqBV,GACpC,IAAMW,EAASZ,EAAkBC,GACjC,OAAKV,EAAOqB,GAGLC,SAASD,EAAQ,IAFhB,K,uBCrEME,GANY,CAC1B,OAAU,EACV,MAAS,EACT,iBAAoB,G,qBCMNC,GAJQ,SAAC,GAAD,IAAGT,EAAH,EAAGA,KAAMU,EAAT,EAASA,QAAT,OACtB,kBAAC,KAAD,eAAQC,KAAK,IAAIC,MAAM,YAAYC,UAAWC,KAAOC,QAAaL,GAAW,CAAEA,QAASA,IAAaV,ICAvFgB,GANM,CACpB,GAAM,EACN,OAAU,EACV,SAAY,GC2CEC,GArCQ,SAAC,GAAc,IACjCC,EACAC,EACJ,OAHoC,EAAXC,MAIxB,KAAKZ,GAAmBa,OACvBH,EAAiBzB,EACjB0B,EAAwB1B,EACxB,MACD,KAAKe,GAAmBc,MACvBJ,EAAiBzB,EACjB0B,EAAwB1B,EACxB,MACD,KAAKe,GAAmBe,iBACvBL,EAAiBzB,EACjB0B,EAAwB1B,EAM1B,IAAKR,EAAOiC,KAAoBjC,EAAOkC,GACtC,OAAO,KAGR,IAAMK,EAAO9B,EAAkBwB,GACzBlB,EAAON,EAAkByB,GAC/B,IAAKlC,EAAOuC,KAAUvC,EAAOe,GAC5B,OAAO,KAGR,IAAMyB,EAA+BpB,GAAqBZ,GAGpDiC,EAAa,CAAEF,KAAMA,EAAMG,OAFZtB,GAAqBZ,KAAsCuB,GAAaY,SACxF3C,EAAOwC,GAC4C,cAAWtC,GACnE,OAAO0C,GAAa,IAAK,kBAAC,GAAD,CAAgB7B,KAAMA,IAAUc,KAAOgB,WAAYJ,ICpCtE,SAASK,GAAmB1C,GAClC,GAAID,EAAWC,GACd,OAAOA,EAER,IAAM2C,ENDA,SAAkB3C,GACxB,OAAID,EAAWC,GACPA,EAEDA,EAAI4C,MAdS,MMWNC,CAAS7C,GACvB,OACkB,IAAjB2C,EAAMG,OAAe9C,EAAM2C,EAAMI,KAAI,SAACC,GACrC,OAAIjD,EAAWiD,GACP,6BAED,6BAAMA,MAKT,SAASC,KACf,IACMC,EADenC,EAAsBX,GACDe,GAAmBa,OAASb,GAAmBc,MACzF,OAAO,kBAAC,GAAD,CAAgBF,KAAMmB,IAGvB,SAASV,GAAaW,EAAazB,EAAQ0B,EAAYf,GAC7D,IAAMgB,EAAYF,EAClB,OACC,kBAACE,EAAD,eAAW7B,UAAS,UAAKC,KAAO6B,QAAZ,YAAuB7B,KAAO8B,KAA9B,YAAsC3D,EAAOwD,IAAeA,IAAmBf,GACjGX,GCzBJ,IAwBe8B,GAxBC,SAAC,GAAoF,IAAlFC,EAAiF,EAAjFA,YAAaC,EAAoE,EAApEA,gBAAiBC,EAAmD,EAAnDA,WAAYC,EAAuC,EAAvCA,SAAUjD,EAA6B,EAA7BA,KAAMkD,EAAuB,EAAvBA,QAASC,EAAc,EAAdA,QAG/EC,GAAyB,KAFR/C,GAAqBZ,KACRuB,GAAaqC,IACXN,EAAkBD,EACxD,OACC,yBAAKQ,MAAO,CAAEF,UAAYA,IACzB,yBAAKvC,UAAWC,KAAOyC,WACtB,yBAAK1C,UAAWC,KAAOkC,YAAajB,GAAmBiB,IACvD,yBAAKnC,UAAWC,KAAOmC,SAAUO,IAAKP,EAAUQ,IAAI,KACnDxE,EAAOe,IAAS,yBAAKa,UAAS,UAAKC,KAAO6B,QAAZ,YAAuB7B,KAAOd,OAAS+B,GAAmB/B,KAEzFf,EAAOiE,IAAY,6BAAMA,GAEzBjE,EAAOkE,IAAYA,EAAQf,KAAI,SAACrB,GAC/B,OAAK9B,EAAO8B,GAGJA,EAFA,Q,qBCNE2C,GAVM,WACpB,IACMV,EAAapD,EADYH,EACyC,qJAElEO,EAAOJ,EADgBH,EACmC,sGAC1D0D,EAAU,CAACb,MACjB,OAAO,kBAAC,GAAD,CAASQ,YAAY,MAAMC,gBAAgB,MAAMC,WAAYA,EAAYC,SAAUU,KAAQ3D,KAAMA,EAAMmD,QAASA,K,oBCGzGS,GAPiB,WAC/B,IAAMZ,EAAatD,EAAkBD,GAC/BO,EAAON,EAAkBD,GACzB0D,EAAU,CAAC,kBAAC,GAAD,CAAgB/B,KAAMZ,GAAmBa,UAC1D,OAAO,kBAAC,GAAD,CAASyB,YAAY,MAAMC,gBAAgB,MAAMC,WAAYA,EAAYC,SAAUY,KAAS7D,KAAMA,EAAMmD,QAASA,K,qBCJ1GW,GAJI,SAAC,GAAD,IAAG9D,EAAH,EAAGA,KAAMU,EAAT,EAASA,QAAT,OAClBmB,GAAa,MAAO,kBAAC,GAAD,CAAgB7B,KAAMA,EAAMU,QAASA,MCiC1D,SAASqD,GAAoB/D,GAC5B,OAAO,yBAAKa,UAAS,UAAKC,KAAOd,KAAZ,YAAoBc,KAAOkD,mBAAsBhE,GAGxDiE,OA/BoB,WAClC,IAMIC,EAFiB7D,GAAqBZ,KAGrBuB,GAAaY,SACjCsC,EAAa,0oCAGd,IAAMf,EAAU,CAAC,kBAAC,GAAD,CAAgB/B,KAAMZ,GAAmBe,oBACpD2B,EACL,6BACC,yBAAKrC,UAAWC,KAAO6B,SACrBoB,GAAoBhC,GAdV,ivBAeX,yBAAKlB,UAAWC,KAAOd,KAAMsD,MAAO,CAAEa,UAAW,SAAUC,WAAY,SAd9C,0DAexBL,GAAoBhC,GAdE,6lCAetB9C,EAAOiF,IAAeH,GAAoBhC,GAAmBmC,MAKjE,OAAO,kBAAC,GAAD,CAASpB,YAAY,MAAMC,gBAAgB,KAAKC,WAvBpC,qMAuB4DE,QAASA,EAASC,QAASA,K,6DChB5FkB,GAbM,SAAC,GAAiC,IAA/BrF,EAA8B,EAA9BA,GAAIsF,EAA0B,EAA1BA,WAAYpB,EAAc,EAAdA,QAEjCqB,GAAmBtF,EADYoB,GAAqBZ,IAE1D,OACC,kBAAC,KAAD,CAAOT,GAAIA,GACTuF,GAAmB,kBAAE,KAAF,KAClBD,GAEDpB,ICGWsB,OAXf,SAAgBpD,GACf,IAIM8B,EAAU,mBAJS,SAAC,GAAa,IAChCuB,EAD+B,EAAVC,IAE3B,OAAO,kBAACD,EAAD,QAEQ,CAAkBC,IAAKtD,IACjCuD,EAAkBjF,EAAkBD,GACpCmF,EAAe,kBAAC,GAAD,CAAc5F,GAAG,UAAUsF,WAAYK,EAAiBzB,QAASA,IACtF2B,KAASL,OAAO,kBAAC,EAAD,CAAK3F,MAAO+F,IAAkBE,SAASC,eAAe,UCMvE,SAASC,KACRR,GAAOP,IAGOgB,OAdiB,WAC/B,IAAMjC,EAAatD,EAAkBD,GAC/BO,EAAON,EAAkBD,GACzByF,EAAaxF,EAAkBD,GAG/B0D,EAAU,CAFc,kBAAC,GAAD,CAAYnD,KAAMkF,EAAYxE,QAASsE,KAC9C,kBAAC,GAAD,CAAgB5D,KAAMZ,GAAmBa,UAEhE,OAAO,kBAAC,GAAD,CAASyB,YAAY,MAAMC,gBAAgB,MAAMC,WAAYA,EAAYC,SAAUkC,KAAYnF,KAAMA,EAAMmD,QAASA,K,qBCI7GiC,GAfe,WAC7B,IAEIpF,EAFEgD,EAAatD,EAAkBD,GAWrC,OAHGR,EAJFe,EAAON,EAHaW,GAAqBZ,KAErBuB,GAAaqC,GACR5D,EAEAA,MAGzBO,GAAQN,EAAkBD,IAEpB,kBAAC,GAAD,CAASqD,YAAY,MAAMC,gBAAgB,MAAMC,WAAYA,EAAYhD,KAAMA,KCZxEqF,GANE,CAChB,cAAiB,EACjB,mBAAsB,EACtB,oBAAuB,GCSxB,SAASC,GAAT,GAAoG,IAAlEC,EAAiE,EAAjEA,UAAWC,EAAsD,EAAtDA,WAAYC,EAA0C,EAA1CA,YAAaC,EAA6B,EAA7BA,SAAUC,EAAmB,EAAnBA,iBACzEC,EAASlG,EAAkBD,GAC3BoG,EA+BP,SAA+BL,GAC9B,IAAMM,EAAgB,CAAEC,MAAOrG,EAAkBD,IAEjD,OADYR,EAAOuG,GAAcQ,OAAOC,OAAOH,EAAeN,GAAcM,EAjC7DI,CAAsBV,GACrCW,KAAOC,KAAKR,EAASL,EAAW,KAAM,CACrCM,OAAQA,IAEPQ,MAAK,SAACC,GACN,IAAMC,EAAOC,GAAgBF,GAC7BrH,EAAOwG,IAAgBA,EAAYc,MAEnCE,OAAM,SAACC,GACP,IAAMH,EAAOC,GAAgBE,EAAEJ,UAC/B,OAAQC,GACP,KAAKlB,GAASsB,mBAEb,YADAnC,GAAOY,IAER,KAAKC,GAASuB,cAEb,YAqBL,SAA4BrB,EAAWE,EAAaC,EAAUC,GAC7D,IAAiB,IAAbD,EAEH,YADAmB,KAGDvB,GAAwB5F,EAAkBD,IA3BtCqH,CAAmBvB,EAAWE,EAAaC,GAM7C,IAAMqB,EA+BT,SAA4BC,EAAWrB,GACtC,IAAK1G,EAAO+H,KAAe/H,EAAO0G,GACjC,OAAO,KAFgD,2BAIxD,YAA4BA,EAA5B,+CAA8C,CAAC,IAAtCoB,EAAqC,QAC7C,GAAIA,EAAgBC,YAAcA,EAGlC,OAAOD,EAAgBE,QARgC,kFAUxD,OAAO,KAzCmBC,CAAmBX,EAAMZ,GAC7C1G,EAAO8H,GACVA,IAIDF,QAqBH,SAASA,KACRrC,GAAOd,IAgBR,SAAS8C,GAAgBF,GACxB,IAAMa,EAAMb,EAASC,KACrB,OAAKtH,EAAOkI,GjB/DU,kBiBkETA,GAAQ/H,EAAW+H,GACxB,KAEDA,EALC,KAQMC,OAlFf,YACC9B,GAAwB,CAAEC,UADgD,EAAxDA,UAC8BC,WAD0B,EAA7CA,WAC2CC,YADE,EAAjCA,YACyDC,UAAU,EAAOC,iBADzC,EAApBA,oBCWxC0B,GAXiB,WAC/B,IAAMrE,EAAatD,EAAkBD,GAC/BO,EAAON,EAAkBD,GAEzByF,EAAaxF,EAAkBD,GAG/B0D,EAAU,CAFI,kBAAC,GAAD,CAAYnD,KAAMkF,EAAYxE,QAFvB,WAAQ4G,QAGZ,kBAAC,GAAD,CAAgBlG,KAAMZ,GAAmBa,UAEhE,OAAO,kBAAC,GAAD,CAASyB,YAAY,MAAMC,gBAAgB,MAAMC,WAAYA,EAAYhD,KAAMA,EAAMmD,QAASA,KCT/F,SAASmE,KACf,IAAMC,EAAQlH,GAAqBZ,GAC7B+H,EAAQ9H,EAAkBD,GAChCgI,IAAQC,KAAK,uBAAwB,CAAE,OAAUH,EAAO,MAASC,IAsBlE,SAASG,KACRnD,GAAO6C,ICjCR,IAMeO,GANU,CACxB,KAAQ,EACR,UAAa,EACb,UAAa,G,UCICC,GANb,WAAYb,EAAWC,GAAS,qBAC9Ba,KAAKd,UAAYA,EACjBc,KAAKb,OAASA,GCUHc,GAPiB,WAC/B,IAAM/E,EAAatD,EAAkBD,GAC/BO,EAAON,EAAkBD,GACzB0D,EAAU,CAACb,MACjB,OAAO,kBAAC,GAAD,CAASQ,YAAY,MAAMC,gBAAgB,MAAMC,WAAYA,EAAYC,SAAUY,KAAS7D,KAAMA,EAAMmD,QAASA,K,qBCL1G6E,GALsB,CACpC,QAAW,EACX,SAAY,GCcEC,GATiB,WAC/B,IACMjI,EAAON,EAAkBD,GAGzB0D,EAAU,CAFI,kBAAC,GAAD,CAAgB/B,KAAMZ,GAAmBe,mBACtC,kBAAC,GAAD,CAAgBH,KAAMZ,GAAmBa,UAEhE,OAAO,kBAAC,GAAD,CAASyB,YAAY,MAAMC,gBAAgB,MAAMC,WALrC,2QAK6DhD,KAAMA,EAAMmD,QAASA,KC0EvF+E,OAtEf,WAGC,GAcD,WACC,IAAIC,EAAezI,EAAkBD,GACrC,GAAIR,EAAOkJ,GACV,OAED,IAAMC,EAAKC,KAASD,GAAGE,WAAWC,cAEjCJ,EADG7I,EAAY8I,EAAI,YAAc9I,EAAY8I,EAAI,OAClCpH,GAAaY,OAEbZ,GAAaqC,GAE7BpD,EAAkBR,EAAkC0I,GA3BpDK,GAEIpI,EAAsBX,GACzB+E,GAAOd,QADR,CAKA,IAAMjC,EAA+BpB,GAAqBZ,GACtDR,EAAOwC,GAsBZ,SAA4CvB,GAC3C,OAAQA,GACP,KAAK8H,GAA6BS,QAEjC,YADAjE,GAAOuD,IAER,KAAKC,GAA6BU,SAEjC,YADAlE,GAAOyD,IAER,WA7BAU,CAAmClH,GAkCrC,WACC,IAAM8D,EAAY7F,EAAkBD,GAC9BmJ,EAA2B,IAAIf,GAAgBxC,GAASwD,qBAAqB,WAClFrE,GAAOZ,OAERwD,GAAQ,CACP7B,UAAWA,EACXE,YAAa,SAACc,GACb,OAAQA,GACP,KAAKqB,GAAiBkB,KACrBxB,KACA,MACD,KAAKM,GAAiBmB,UACrBvE,GAAOS,IACP,MACD,KAAK2C,GAAiBoB,UACrBxE,GAAOuD,MAMVpC,iBAAkB,CAACiD,KApDpBK,KCPcC,OArBf,SAAqBC,GACpB,IAAMC,EAASD,EAAMC,OACrB,OAAQA,EAAOhI,MACd,IAAK,sBAeN8G,KAbE,MACD,IAAK,+BPIA,SAA8B3B,GAEpC,GADc7G,EAAkBD,KAClB8G,EAAKiB,MAAnB,CAIA,IAAMjC,EAAY7F,EAAkBD,GAC9B+F,EAAa,CAAE6D,aAAc9C,EAAK8C,cACxCjC,GAAQ,CACP7B,UAAWA,EAAWC,WAAYA,EAAYC,YAAa,WAC1DjB,GAAOS,YAPR0C,KONC2B,CAAqBF,EAAO7C,MAC5B,MACD,IAAK,4BPiBNoB,OQjBDF,IAAQC,KAAK,eAAgB,IAS7BlD,GAAOP,IAEPwD,IAAQ8B,WAAU,SAAC7C,GAAD,OAAOwC,GAAYxC,O,mBCvBrChI,EAAOC,QAAU,IAA0B,kC,kBCC3CD,EAAOC,QAAU,CAAC,WAAa,0BAA0B,SAAW,wBAAwB,UAAY,yBAAyB,KAAO,oBAAoB,iBAAmB,gCAAgC,KAAO,oBAAoB,OAAS,sBAAsB,QAAU,uBAAuB,KAAO,oBAAoB,WAAa,6B","file":"static/js/main.17c90dd4.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sad.bdea5aa6.png\";","module.exports = __webpack_public_path__ + \"static/media/thumbup.c8b601ab.png\";","import React from 'react';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nconst App = ({ panel }) => {\n\treturn (\n\t\t<View activePanel={panel.props.id} >\n\t\t\t{panel}\n\t\t</View>\n\t);\n}\n\nexport default App;","const LINE_BREAKER = '\\n';\n\nexport function exists(obj) {\n\treturn obj !== undefined && obj !== null;\n}\n\nexport function strIsBlank(str) {\n\treturn !exists(str) || str === '';\n}\n\nexport function getLines(str) {\n\tif (strIsBlank(str)) {\n\t\treturn str;\n\t}\n\treturn str.split(LINE_BREAKER);\n}\n\nexport function isString(val) {\n\treturn typeof val === 'string';\n}\n\nexport function strContains(str, substr) {\n\tif (strIsBlank(str) || !exists(substr)) {\n\t\treturn false;\n\t}\n\treturn str.indexOf(substr) !== -1;\n}","import $ from 'jquery';\nimport { strIsBlank, exists } from './utils';\n\nexport const ThymeleafParamName = {\n\tTOKEN: 'token',\n\tPERMANENT_ACCESS_PROVIDE_RESULT: 'permanent-access-provide-result',\n\tERROR: 'error',\n\tIS_REGISTERED: 'is-registered',\n\tPLATFORM_TYPE: 'platform-type',\n\tERROR_HEADER: 'error-header',\n\tERROR_TEXT: 'error-text',\n\tDIALOG_URL: 'dialog-url',\n\tGROUP_URL: 'group-url',\n\tPANEL_HEADER_TEXT: 'panel-header-text',\n\tDIALOG_REDIRECT_BUTTON_TEXT: 'dialog-redirect-button-text',\n\tGROUP_REDIRECT_BUTTON_TEXT: 'group-redirect-button-text',\n\tTMP_ACCESS_PROVIDED_HEADER: 'tmp-access-provided-header',\n\tNEED_REPEAT_ACCESS_PROVISION_TEXT: 'need-repeat-access-provision-text',\n\tPERMANENT_ACCESS_BUTTON_TEXT: 'permanent-access-button-text',\n\tNEED_CACHE_CLEAN_HEADER: 'need-cache-clean-header',\n\tNEED_CACHE_CLEAN_PC_TEXT: 'need-cache-clean-pc-text',\n\tNEED_CACHE_CLEAN_MOBILE_TEXT: 'need-cache-clean-mobile-text',\n\tNEED_CACHE_CLEAN_COMMON_TEXT: 'need-cache-clean-common-text',\n\tAPI_URL: 'api-url',\n\tGET_ACCESS_TYPE_METHOD_URN: 'get-access-type-method-urn',\n\tREFRESH_TOKEN_METHOD_URN: 'refresh-token-method-urn',\n\tSET_ACCESS_TOKEN_METHOD_URN: 'set-access-token-method-urn',\n\tPERMANENT_ACCESS_PROVIDED_HEADER: 'permanent-access-provided-header',\n\tPERMANENT_ACCESS_PROVIDED_TEXT: 'permanent-access-provided-text',\n\tUNREGISTERED_USER_MESSAGE_HEADER: 'unregistered-user-message-header',\n\tUNREGISTERED_USER_MESSAGE_TEXT: 'unregistered-user-message-text',\n\tACCESS_REQUEST_SCOPE: 'access-request-scope',\n\tAPP_ID: 'app-id',\n\tTMP_ACCESS_DECLINED_HEADER: 'tmp-access-declined-header',\n\tTMP_ACCESS_DECLINED_TEXT: 'tmp-access-declined-text',\n\tRETRY_PROVIDE_TMP_ACCESS_BUTTON_TEXT: 'retry-provide-tmp-access-button-text',\n\tPERMANENT_ACCESS_URL: 'permanent-access-url',\n\tPER_ACCESS_REDIRECT_BUTTON_TEXT: 'per-access-redirect-button-text'\n};\n\nexport function getThymeleafParam(paramName) {\n\treturn getThymeleafParamWithDefault(paramName, null);\n}\n\nexport function getThymeleafParamWithDefault(paramName, defaultValue) {\n\tconst el = getThymeleafParamContainer(paramName);\n\tif (!el || strIsBlank(el.text())) {\n\t\treturn defaultValue;\n\t}\n\treturn el.text();\n}\n\nexport function setThymeleafParam(paramName, value) {\n\tconst el = getThymeleafParamContainer(paramName);\n\tif (!exists(el)) {\n\t\treturn;\n\t}\n\tel.text(value);\n}\n\nfunction getThymeleafParamContainer(paramName) {\n\treturn $('#th-' + paramName);\n}\n\nexport function getThymeleafParamBool(paramName) {\n\tconst strRes = getThymeleafParamWithDefault(paramName, 'false');\n\tif (strRes === 'true') {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function getThymeleafParamInt(paramName) {\n\tconst strRes = getThymeleafParam(paramName);\n\tif (!exists(strRes)) {\n\t\treturn null;\n\t}\n\treturn parseInt(strRes, 10);\n}","const RedirectButtonType = {\n\t\"DIALOG\": 0,\n\t\"GROUP\": 1,\n\t\"PERMANENT_ACCESS\": 2\n}\n\nexport default RedirectButtonType;","import React from 'react';\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\n\nimport styles from './style.module.css';\n\nconst ButtonTemplate = ({ text, onClick }) => (\n\t<Button size=\"l\" level=\"secondary\" className={styles.button} {...(onClick && { onClick: onClick })}>{text}</Button>\n);\n\nexport default ButtonTemplate;","const PlatformType = {\n\t\"PC\": 0,\n\t\"MOBILE\": 1,\n\t\"M_VK_COM\": 2\n}\n\nexport default PlatformType;","import React from 'react';\nimport ButtonTemplate from './ButtonTemplate';\nimport styles from './style.module.css';\nimport { ThymeleafParamName, getThymeleafParam, getThymeleafParamInt } from '../utils/thymeleaf-utils';\nimport { exists } from '../utils/utils';\nimport PlatformType from '../utils/PlatformType';\nimport RedirectButtonType from './RedirectButtonType';\nimport { createButton } from './utils';\n\nconst RedirectButton = ({ type }) => {\n\tlet urlThParamName;\n\tlet buttonTextThParamName;\n\tswitch (type) {\n\t\tcase RedirectButtonType.DIALOG:\n\t\t\turlThParamName = ThymeleafParamName.DIALOG_URL;\n\t\t\tbuttonTextThParamName = ThymeleafParamName.DIALOG_REDIRECT_BUTTON_TEXT;\n\t\t\tbreak;\n\t\tcase RedirectButtonType.GROUP:\n\t\t\turlThParamName = ThymeleafParamName.GROUP_URL;\n\t\t\tbuttonTextThParamName = ThymeleafParamName.GROUP_REDIRECT_BUTTON_TEXT;\n\t\t\tbreak;\n\t\tcase RedirectButtonType.PERMANENT_ACCESS:\n\t\t\turlThParamName = ThymeleafParamName.PERMANENT_ACCESS_URL;\n\t\t\tbuttonTextThParamName = ThymeleafParamName.PER_ACCESS_REDIRECT_BUTTON_TEXT;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\n\tif (!exists(urlThParamName) || !exists(buttonTextThParamName)) {\n\t\treturn null;\n\t}\n\n\tconst href = getThymeleafParam(urlThParamName);\n\tconst text = getThymeleafParam(buttonTextThParamName);\n\tif (!exists(href) || !exists(text)) {\n\t\treturn null;\n\t}\n\n\tconst permanentAccessProvideResult = getThymeleafParamInt(ThymeleafParamName.PERMANENT_ACCESS_PROVIDE_RESULT);\n\tconst openInNewTab = getThymeleafParamInt(ThymeleafParamName.PLATFORM_TYPE) !== PlatformType.MOBILE\n\t\t&& !exists(permanentAccessProvideResult);\n\tconst attributes = { href: href, target: openInNewTab ? \"_blank\" : undefined }\n\treturn createButton('a', <ButtonTemplate text={text} />, styles.buttonLink, attributes);\n};\n\nexport default RedirectButton;","import React from 'react';\nimport { exists, getLines, strIsBlank } from '../utils/utils';\nimport { ThymeleafParamName, getThymeleafParamBool } from '../utils/thymeleaf-utils';\nimport RedirectButtonType from './RedirectButtonType';\nimport RedirectButton from './RedirectButton';\nimport styles from './style.module.css';\n\nexport function handleLineBreakers(str) {\n\tif (strIsBlank(str)) {\n\t\treturn str;\n\t}\n\tconst lines = getLines(str);\n\treturn (\n\t\tlines.length === 1 ? str : lines.map((line) => {\n\t\t\tif (strIsBlank(line)) {\n\t\t\t\treturn <br />\n\t\t\t}\n\t\t\treturn <div>{line}</div>\n\t\t})\n\t);\n}\n\nexport function createRegisteredDependentRedirectButton() {\n\tconst isRegistered = getThymeleafParamBool(ThymeleafParamName.IS_REGISTERED);\n\tconst redirectButtonType = isRegistered ? RedirectButtonType.DIALOG : RedirectButtonType.GROUP;\n\treturn <RedirectButton type={redirectButtonType} />\n}\n\nexport function createButton(htmlTagName, button, classNames, attributes) {\n\tconst CustomTag = htmlTagName;\n\treturn (\n\t\t<CustomTag className={`${styles.wrapper} ${styles.flex} ${exists(classNames) && classNames}`} {...(attributes)}>\n\t\t\t{button}\n\t\t</CustomTag>\n\t);\n}","import React from 'react';\nimport styles from './style.module.css';\nimport { ThymeleafParamName, getThymeleafParamInt } from '../utils/thymeleaf-utils';\nimport { exists } from '../utils/utils';\nimport { handleLineBreakers } from './utils';\nimport PlatformType from '../utils/PlatformType';\n\nconst Message = ({ marginTopPc, marginTopMobile, textHeader, emoticon, text, content, buttons }) => {\n\tconst thPlatformType = getThymeleafParamInt(ThymeleafParamName.PLATFORM_TYPE);\n\tconst isMobile = thPlatformType !== PlatformType.PC;\n\tconst marginTop = isMobile === true ? marginTopMobile : marginTopPc;\n\treturn (\n\t\t<div style={{ marginTop: (marginTop) }}>\n\t\t\t<div className={styles.container}>\n\t\t\t\t<div className={styles.textHeader}>{handleLineBreakers(textHeader)}</div>\n\t\t\t\t<img className={styles.emoticon} src={emoticon} alt=\"\" />\n\t\t\t\t{exists(text) && <div className={`${styles.wrapper} ${styles.text}`}>{handleLineBreakers(text)}</div>}\n\t\t\t</div>\n\t\t\t{exists(content) && <div>{content}</div>}\n\t\t\t{\n\t\t\t\texists(buttons) && buttons.map((button) => {\n\t\t\t\t\tif (!exists(button)) {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t\treturn (button);\n\t\t\t\t})\n\t\t\t}\n\t\t</div>\n\t);\n};\n\nexport default Message;","import React from 'react';\nimport { ThymeleafParamName, getThymeleafParamWithDefault } from '../utils/thymeleaf-utils';\nimport Message from './Message';\nimport sadImg from '../img/sad.png';\nimport {createRegisteredDependentRedirectButton} from './utils';\n\nconst ErrorMessage = () => {\n\tconst errorHeaderThParamName = ThymeleafParamName.ERROR_HEADER;\n\tconst textHeader = getThymeleafParamWithDefault(errorHeaderThParamName, 'Извините,\\nчто-то пошло не так');\n\tconst errorTextThParamName = ThymeleafParamName.ERROR_TEXT;\n\tconst text = getThymeleafParamWithDefault(errorTextThParamName, 'Скоро всё исправим');\n\tconst buttons = [createRegisteredDependentRedirectButton()];\n\treturn <Message marginTopPc='15%' marginTopMobile='20%' textHeader={textHeader} emoticon={sadImg} text={text} buttons={buttons} />;\n\n};\n\nexport default ErrorMessage;","import React from 'react';\n\nimport Message from './Message';\nimport kindImg from '../img/kind.png';\nimport RedirectButton from './RedirectButton';\nimport RedirectButtonType from './RedirectButtonType';\nimport { ThymeleafParamName, getThymeleafParam } from '../utils/thymeleaf-utils';\n\nconst UnregisteredUserMessage = () => {\n\tconst textHeader = getThymeleafParam(ThymeleafParamName.UNREGISTERED_USER_MESSAGE_HEADER);\n\tconst text = getThymeleafParam(ThymeleafParamName.UNREGISTERED_USER_MESSAGE_TEXT);\n\tconst buttons = [<RedirectButton type={RedirectButtonType.DIALOG} />];\n\treturn <Message marginTopPc='15%' marginTopMobile='25%' textHeader={textHeader} emoticon={kindImg} text={text} buttons={buttons} />;\n}\n\nexport default UnregisteredUserMessage;","import React from 'react';\nimport ButtonTemplate from './ButtonTemplate';\nimport { createButton } from './utils';\n\nconst MenuButton = ({ text, onClick }) => (\n\tcreateButton('div', <ButtonTemplate text={text} onClick={onClick} />)\n);\n\nexport default MenuButton;","import React from 'react';\nimport { ThymeleafParamName, getThymeleafParamInt } from '../utils/thymeleaf-utils';\nimport PlatformType from '../utils/PlatformType';\nimport Message from './Message';\nimport RedirectButton from './RedirectButton';\nimport RedirectButtonType from './RedirectButtonType';\nimport { handleLineBreakers } from './utils';\nimport styles from './style.module.css';\nimport { exists } from '../utils/utils';\n\n// TODO тексты в бд\nconst PermanentAccessInstruction = () => {\n\tconst textHeader = 'Предоставление постоянного доступа';\n\tconst intro = 'Помимо доступа к списку друзей у вас будет запрошен доступ к личным данным с возможностью работы Подаркина с этой информацией, когда вы не в сети.\\n'\n\tconst clarificationHeader = 'Пояснение';\n\tconst clarificationText = 'Работа с вашими личными данными и списком друзей будет проводиться только по вашей команде Подаркину и, только когда вы в сети.\\nПостоянный доступ необходим только для того, чтобы не запрашивать у вас доступ повторно.';\n\tconst platformType = getThymeleafParamInt(ThymeleafParamName.PLATFORM_TYPE);\n\t\n\tlet mobileText;\n\tif (platformType === PlatformType.MOBILE) {\n\t\tmobileText = '\\nДля предоставления постоянного доступа, возможно, нужно будет ввести логин и пароль от вашего профиля ВКонтакте.\\nЕсли вы их не помните, пожалуйста, предоставьте доступ с компьютера, на котором уже выполнен вход в ваш профиль.';\n\t}\n\n\tconst buttons = [<RedirectButton type={RedirectButtonType.PERMANENT_ACCESS} />]\n\tconst content = (\n\t\t<div>\n\t\t\t<div className={styles.wrapper}>\n\t\t\t\t{createTextContainer(handleLineBreakers(intro))}\n\t\t\t\t<div className={styles.text} style={{ textAlign: 'center', fontWeight: 'bold' }}>{clarificationHeader}</div>\n\t\t\t\t{createTextContainer(handleLineBreakers(clarificationText))}\n\t\t\t\t{exists(mobileText) && createTextContainer(handleLineBreakers(mobileText))}\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\treturn <Message marginTopPc='10%' marginTopMobile='5%' textHeader={textHeader} content={content} buttons={buttons} />;\n}\n\nfunction createTextContainer(text) {\n\treturn <div className={`${styles.text} ${styles.bigTextContainer}`} >{text}</div>\n}\n\nexport default PermanentAccessInstruction;","import React from 'react';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport { exists } from '../utils/utils';\nimport { ThymeleafParamName, getThymeleafParamInt } from '../utils/thymeleaf-utils';\n\nconst ContentPanel = ({ id, headerText, content }) => {\n\tconst permanentAccessProvideResult = getThymeleafParamInt(ThymeleafParamName.PERMANENT_ACCESS_PROVIDE_RESULT);\n\tconst showPanelHeader = !exists(permanentAccessProvideResult);\n\treturn (\n\t\t<Panel id={id}>\n\t\t\t{showPanelHeader && < PanelHeader >\n\t\t\t\t{headerText}\n\t\t\t</PanelHeader>}\n\t\t\t{content}\n\t\t</Panel>\n\t);\n};\n\nexport default ContentPanel;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from '../App';\nimport ContentPanel from '../panels/ContentPanel';\nimport { ThymeleafParamName, getThymeleafParam } from './thymeleaf-utils';\n\nfunction render(type) {\n\tconst ComponentWrapper = ({ tag }) => {\n\t\tconst Tag = tag;\n\t\treturn <Tag />;\n\t}\n\tconst content = <ComponentWrapper tag={type} />\n\tconst panelHeaderText = getThymeleafParam(ThymeleafParamName.PANEL_HEADER_TEXT);\n\tconst contentPanel = <ContentPanel id='content' headerText={panelHeaderText} content={content} />\n\tReactDOM.render(<App panel={contentPanel} />, document.getElementById('root'));\n}\n\nexport default render;","import React from 'react';\nimport thumbupImg from '../img/thumbup.png';\nimport MenuButton from './MenuButton';\nimport RedirectButton from './RedirectButton';\nimport RedirectButtonType from './RedirectButtonType';\nimport PermanentAccessInstruction from './PermanentAccessInstruction';\nimport Message from './Message';\nimport { ThymeleafParamName, getThymeleafParam } from '../utils/thymeleaf-utils';\nimport render from '../utils/render';\n\nconst TemporaryAccessProvided = () => {\n\tconst textHeader = getThymeleafParam(ThymeleafParamName.TMP_ACCESS_PROVIDED_HEADER);\n\tconst text = getThymeleafParam(ThymeleafParamName.NEED_REPEAT_ACCESS_PROVISION_TEXT);\n\tconst buttonText = getThymeleafParam(ThymeleafParamName.PERMANENT_ACCESS_BUTTON_TEXT);\n\tconst permanentAccessButton = <MenuButton text={buttonText} onClick={renderPermanentAccessInstruction} />\n\tconst redirectButton = <RedirectButton type={RedirectButtonType.DIALOG} />;\n\tconst buttons = [permanentAccessButton, redirectButton];\n\treturn <Message marginTopPc='10%' marginTopMobile='20%' textHeader={textHeader} emoticon={thumbupImg} text={text} buttons={buttons} />;\n};\n\nfunction renderPermanentAccessInstruction() {\n\trender(PermanentAccessInstruction);\n}\n\nexport default TemporaryAccessProvided;","import React from 'react';\nimport Message from './Message';\nimport { ThymeleafParamName, getThymeleafParam, getThymeleafParamInt } from '../utils/thymeleaf-utils';\nimport { exists } from '../utils/utils';\nimport PlatformType from '../utils/PlatformType';\n\nconst NeedCacheCleanMessage = () => {\n\tconst textHeader = getThymeleafParam(ThymeleafParamName.NEED_CACHE_CLEAN_HEADER);\n\tconst platformType = getThymeleafParamInt(ThymeleafParamName.PLATFORM_TYPE);\n\tlet text;\n\tif (platformType === PlatformType.PC) {\n\t\ttext = getThymeleafParam(ThymeleafParamName.NEED_CACHE_CLEAN_PC_TEXT);\n\t} else {\n\t\ttext = getThymeleafParam(ThymeleafParamName.NEED_CACHE_CLEAN_MOBILE_TEXT);\n\t}\n\tif(exists(text)){\n\t\ttext += getThymeleafParam(ThymeleafParamName.NEED_CACHE_CLEAN_COMMON_TEXT);\n\t}\t\n\treturn <Message marginTopPc='10%' marginTopMobile='20%' textHeader={textHeader} text={text} />;\n}\n\nexport default NeedCacheCleanMessage;","const ApiError = {\n\t\"TOKEN_EXPIRED\": 1,\n\t\"TOKEN_NOT_RELEVANT\": 2,\n\t\"USER_NOT_REGISTERED\": 3\n}\n\nexport default ApiError;","import axious from 'axios';\nimport ErrorMessage from '../panels/ErrorMessage';\nimport NeedCacheCleanMessage from '../panels/NeedCacheCleanMessage';\nimport { exists, isString, strIsBlank } from './utils';\nimport { ThymeleafParamName, getThymeleafParam, setThymeleafParam } from '../utils/thymeleaf-utils';\nimport render from './render';\nimport ApiError from './ApiError';\n\nfunction request({ methodUrn, parameters, dataHandler, apiErrorHandlers }) {\n\trequestWithRepeatedFlag({ methodUrn: methodUrn, parameters: parameters, dataHandler: dataHandler, repeated: false, apiErrorHandlers: apiErrorHandlers });\n}\n\nfunction requestWithRepeatedFlag({methodUrn, parameters, dataHandler, repeated, apiErrorHandlers}) {\n\tconst apiUrl = getThymeleafParam(ThymeleafParamName.API_URL);\n\tconst params = createParamsContainer(parameters);\n\taxious.post(apiUrl + methodUrn, null, {\n\t\tparams: params\n\t})\n\t\t.then((response) => {\n\t\t\tconst data = getResponseData(response);\n\t\t\texists(dataHandler) && dataHandler(data);\n\t\t})\n\t\t.catch((e) => {\n\t\t\tconst data = getResponseData(e.response);\n\t\t\tswitch (data) {\n\t\t\t\tcase ApiError.TOKEN_NOT_RELEVANT:\n\t\t\t\t\trender(NeedCacheCleanMessage);\n\t\t\t\t\treturn;\n\t\t\t\tcase ApiError.TOKEN_EXPIRED:\n\t\t\t\t\thandleExpiredToken(methodUrn, dataHandler, repeated, apiErrorHandlers);\n\t\t\t\t\treturn;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst apiErrorHandler = getApiErrorHandler(data, apiErrorHandlers);\n\t\t\tif (exists(apiErrorHandler)) {\n\t\t\t\tapiErrorHandler();\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\trenderErrorMessage();\n\t\t});\n}\n\nfunction createParamsContainer(parameters) {\n\tconst defaultParams = { token: getThymeleafParam(ThymeleafParamName.TOKEN) };\n\tconst res = exists(parameters) ? Object.assign(defaultParams, parameters) : defaultParams;\n\treturn res;\n}\n\nfunction handleExpiredToken(methodUrn, dataHandler, repeated, apiErrorHandlers) {\n\tif (repeated === true) {\n\t\trenderErrorMessage();\n\t\treturn;\n\t}\n\trequestWithRepeatedFlag(getThymeleafParam(ThymeleafParamName.REFRESH_TOKEN_METHOD_URN), (data) => {\n\t\tsetThymeleafParam(ThymeleafParamName.TOKEN, data);\n\t\trequestWithRepeatedFlag(methodUrn, dataHandler, true, apiErrorHandlers);\n\t}, true);\n}\n\nfunction renderErrorMessage() {\n\trender(ErrorMessage);\n}\n\nfunction getApiErrorHandler(errorCode, apiErrorHandlers) {\n\tif (!exists(errorCode) || !exists(apiErrorHandlers)) {\n\t\treturn null;\n\t}\n\tfor (let apiErrorHandler of apiErrorHandlers) {\n\t\tif (apiErrorHandler.errorCode !== errorCode) {\n\t\t\tcontinue;\n\t\t}\n\t\treturn apiErrorHandler.hadler;\n\t};\n\treturn null;\n}\n\nfunction getResponseData(response) {\n\tconst res = response.data;\n\tif (!exists(res)) {\n\t\treturn null;\n\t}\n\tif (isString(res) && strIsBlank(res)) {\n\t\treturn null;\n\t}\n\treturn res;\n}\n\nexport default request;","import React from 'react';\nimport RedirectButton from './RedirectButton';\nimport RedirectButtonType from './RedirectButtonType';\nimport MenuButton from './MenuButton';\nimport Message from './Message';\nimport { requestAccess } from '../utils/accessRequest';\nimport { ThymeleafParamName, getThymeleafParam } from '../utils/thymeleaf-utils';\n\nconst TemporaryAccessDeclined = () => {\n\tconst textHeader = getThymeleafParam(ThymeleafParamName.TMP_ACCESS_DECLINED_HEADER);\n\tconst text = getThymeleafParam(ThymeleafParamName.TMP_ACCESS_DECLINED_TEXT);\n\tconst retryButtonOnClick = () => { requestAccess() };\n\tconst buttonText = getThymeleafParam(ThymeleafParamName.RETRY_PROVIDE_TMP_ACCESS_BUTTON_TEXT);\n\tconst retryButton = <MenuButton text={buttonText} onClick={retryButtonOnClick} />\n\tconst redirectButton = <RedirectButton type={RedirectButtonType.DIALOG} />;\n\tconst buttons = [retryButton, redirectButton];\n\treturn <Message marginTopPc='10%' marginTopMobile='25%' textHeader={textHeader} text={text} buttons={buttons} />;\n}\n\nexport default TemporaryAccessDeclined;","import connect from '@vkontakte/vk-connect';\nimport { ThymeleafParamName, getThymeleafParam, getThymeleafParamInt } from './thymeleaf-utils';\nimport TemporaryAccessDeclined from '../panels/TemporaryAccessDeclined';\nimport TemporaryAccessProvided from '../panels/TemporaryAccessProvided';\nimport render from './render';\nimport request from './request';\n\nexport function requestAccess() {\n\tconst appId = getThymeleafParamInt(ThymeleafParamName.APP_ID);\n\tconst scope = getThymeleafParam(ThymeleafParamName.ACCESS_REQUEST_SCOPE);\n\tconnect.send(\"VKWebAppGetAuthToken\", { \"app_id\": appId, \"scope\": scope });\n}\n\nexport function handleAccessProvided(data) {\n\tconst scope = getThymeleafParam(ThymeleafParamName.ACCESS_REQUEST_SCOPE);\n\tif (scope !== data.scope) {\n\t\trenderTemporaryAccessDeclined();\n\t\treturn;\n\t}\n\tconst methodUrn = getThymeleafParam(ThymeleafParamName.SET_ACCESS_TOKEN_METHOD_URN);\n\tconst parameters = { access_token: data.access_token };\n\trequest({\n\t\tmethodUrn: methodUrn, parameters: parameters, dataHandler: () => {\n\t\t\trender(TemporaryAccessProvided);\n\t\t}\n\t});\n}\n\nexport function handleTemporaryAccessDeclined() {\n\trenderTemporaryAccessDeclined();\n}\n\nfunction renderTemporaryAccessDeclined() {\n\trender(TemporaryAccessDeclined);\n}","const VkDataAccessType = {\n\t\"NONE\": 0,\n\t\"TEMPORARY\": 1,\n\t\"PERMANENT\": 2\n}\n\nexport default VkDataAccessType;","class ApiErrorHandler {\n  constructor(errorCode, hadler) {\n    this.errorCode = errorCode;\n    this.hadler = hadler;\n  }\n}\n\nexport default ApiErrorHandler;","import React from 'react';\nimport Message from './Message';\nimport { createRegisteredDependentRedirectButton } from './utils';\nimport kindImg from '../img/kind.png';\nimport { ThymeleafParamName, getThymeleafParam } from '../utils/thymeleaf-utils';\n\nconst PermanentAccessProvided = () => {\n\tconst textHeader = getThymeleafParam(ThymeleafParamName.PERMANENT_ACCESS_PROVIDED_HEADER);\n\tconst text = getThymeleafParam(ThymeleafParamName.PERMANENT_ACCESS_PROVIDED_TEXT);\n\tconst buttons = [createRegisteredDependentRedirectButton()];\n\treturn <Message marginTopPc='15%' marginTopMobile='25%' textHeader={textHeader} emoticon={kindImg} text={text} buttons={buttons} />;\n};\n\nexport default PermanentAccessProvided;","const PermanentAccessProvideResult = {\n\t'SUCCESS': 0,\n\t'DECLINED': 1\n}\n\nexport default PermanentAccessProvideResult;","import React from 'react';\nimport RedirectButton from './RedirectButton';\nimport RedirectButtonType from './RedirectButtonType';\nimport Message from './Message';\nimport { ThymeleafParamName, getThymeleafParam } from '../utils/thymeleaf-utils';\n\n// TODO тексты в бд\nconst PermanentAccessDeclined = () => {\n\tconst textHeader = 'Постоянный доступ к списку друзей не предоставлен';\n\tconst text = getThymeleafParam(ThymeleafParamName.NEED_REPEAT_ACCESS_PROVISION_TEXT);\n\tconst retryButton = <RedirectButton type={RedirectButtonType.PERMANENT_ACCESS} />;\n\tconst redirectButton = <RedirectButton type={RedirectButtonType.DIALOG} />;\n\tconst buttons = [retryButton, redirectButton];\n\treturn <Message marginTopPc='10%' marginTopMobile='25%' textHeader={textHeader} text={text} buttons={buttons} />;\n}\n\nexport default PermanentAccessDeclined;","import ErrorMessage from '../panels/ErrorMessage';\nimport UnregisteredUserMessage from '../panels/UnregisteredUserMessage';\nimport TemporaryAccessProvided from '../panels/TemporaryAccessProvided';\nimport { ThymeleafParamName, getThymeleafParam, getThymeleafParamBool, getThymeleafParamInt, setThymeleafParam } from './thymeleaf-utils';\nimport { exists, strContains } from './utils';\nimport render from './render';\nimport request from './request';\nimport { requestAccess } from './accessRequest';\nimport VkDataAccessType from './VkDataAccessType';\nimport ApiError from './ApiError';\nimport ApiErrorHandler from './ApiErrorHandler';\nimport PermanentAccessProvided from '../panels/PermanentAccessProvided';\nimport platform from 'platform';\nimport PlatformType from './PlatformType';\nimport PermanentAccessProvideResult from './PermanentAccessProvideResult';\nimport PermanentAccessDeclined from '../panels/PermanentAccessDeclined';\n\nfunction start() {\n\tcheckPlatformType();\n\n\tif (getThymeleafParamBool(ThymeleafParamName.ERROR)) {\n\t\trender(ErrorMessage);\n\t\treturn;\n\t}\n\n\tconst permanentAccessProvideResult = getThymeleafParamInt(ThymeleafParamName.PERMANENT_ACCESS_PROVIDE_RESULT);\n\tif (exists(permanentAccessProvideResult)) {\n\t\thandlePermanentAccessProvideResult(permanentAccessProvideResult);\n\t\treturn;\n\t}\n\n\thandleAccessType();\n}\n\nfunction checkPlatformType() {\n\tlet platformType = getThymeleafParam(ThymeleafParamName.PLATFORM_TYPE);\n\tif (exists(platformType)) {\n\t\treturn;\n\t}\n\tconst os = platform.os.toString().toLowerCase();\n\tif (strContains(os, \"android\") || strContains(os, \"ios\")) {\n\t\tplatformType = PlatformType.MOBILE;\n\t} else {\n\t\tplatformType = PlatformType.PC;\n\t}\n\tsetThymeleafParam(ThymeleafParamName.PLATFORM_TYPE, platformType);\n}\n\nfunction handlePermanentAccessProvideResult(value) {\n\tswitch (value) {\n\t\tcase PermanentAccessProvideResult.SUCCESS:\n\t\t\trender(PermanentAccessProvided);\n\t\t\treturn;\n\t\tcase PermanentAccessProvideResult.DECLINED:\n\t\t\trender(PermanentAccessDeclined);\n\t\t\treturn;\n\t\tdefault:\n\t\t\treturn;\n\t}\n}\n\nfunction handleAccessType() {\n\tconst methodUrn = getThymeleafParam(ThymeleafParamName.GET_ACCESS_TYPE_METHOD_URN);\n\tconst userNotRegisteredHandler = new ApiErrorHandler(ApiError.USER_NOT_REGISTERED, () => {\n\t\trender(UnregisteredUserMessage);\n\t});\n\trequest({\n\t\tmethodUrn: methodUrn,\n\t\tdataHandler: (data) => {\n\t\t\tswitch (data) {\n\t\t\t\tcase VkDataAccessType.NONE:\n\t\t\t\t\trequestAccess();\n\t\t\t\t\tbreak;\n\t\t\t\tcase VkDataAccessType.TEMPORARY:\n\t\t\t\t\trender(TemporaryAccessProvided);\n\t\t\t\t\tbreak;\n\t\t\t\tcase VkDataAccessType.PERMANENT:\n\t\t\t\t\trender(PermanentAccessProvided);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\tapiErrorHandlers: [userNotRegisteredHandler]\n\t});\n}\n\nexport default start;","import start from './start';\nimport { handleAccessProvided, handleTemporaryAccessDeclined } from './accessRequest';\n\nfunction handleEvent(event) {\n\tconst detail = event.detail;\n\tswitch (detail.type) {\n\t\tcase 'VKWebAppViewRestore':\n\t\t\thandleViewRestore();\n\t\t\tbreak;\n\t\tcase 'VKWebAppAccessTokenReceived':\n\t\t\thandleAccessProvided(detail.data);\n\t\t\tbreak;\n\t\tcase 'VKWebAppAccessTokenFailed':\n\t\t\thandleTemporaryAccessDeclined();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n}\n\nfunction handleViewRestore() {\n\tstart();\n}\n\nexport default handleEvent;","// NOTE без App рушится верстка\nimport App from './App';\nimport 'core-js/features/map';\nimport 'core-js/features/set';\nimport connect from '@vkontakte/vk-connect';\nimport start from './utils/start';\nimport handleEvent from './utils/handleEvent';\nimport render from './utils/render';\nimport PermanentAccessInstruction from './panels/PermanentAccessInstruction';\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nconnect.send(\"VKWebAppInit\", {});\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\n// start();\nrender(PermanentAccessInstruction);\n\nconnect.subscribe((e) => handleEvent(e));","module.exports = __webpack_public_path__ + \"static/media/kind.7362beef.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textHeader\":\"style_textHeader__1kvhw\",\"emoticon\":\"style_emoticon__2rlby\",\"container\":\"style_container__3RFqX\",\"text\":\"style_text__1F2EP\",\"bigTextContainer\":\"style_bigTextContainer__2oe1v\",\"link\":\"style_link__1iMrX\",\"button\":\"style_button__1gPxd\",\"wrapper\":\"style_wrapper__2cWjy\",\"flex\":\"style_flex__3yOg6\",\"buttonLink\":\"style_buttonLink__18msL\"};"],"sourceRoot":""}